"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.rewriteCompileScriptOnce = void 0;
const uni_shared_1 = require("@dcloudio/uni-shared");
const uni_cli_shared_1 = require("@dcloudio/uni-cli-shared");
exports.rewriteCompileScriptOnce = (0, uni_shared_1.once)(rewriteCompileScript);
function rewriteCompileScript() {
    const compiler = require((0, uni_cli_shared_1.resolveBuiltIn)('@vue/compiler-sfc'));
    const { compileScript } = compiler;
    // script-setup + v-bind
    compiler.compileScript = (sfc, options) => {
        const originalScriptSetupLang = sfc.scriptSetup?.lang;
        if (originalScriptSetupLang === 'uts') {
            sfc.scriptSetup.lang = 'ts';
        }
        const result = compileScript(sfc, options);
        if (originalScriptSetupLang === 'uts') {
            sfc.scriptSetup.lang = 'uts';
        }
        return result;
    };
}
